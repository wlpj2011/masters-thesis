\chapter{Local Converse Theorem for Gauss Sums}	%Chapter title

\noindent We will use the following notation in this chapter; mostly following the notation choices in \cite{Lang1990}.\\
$\bbF_p$ will be the finite field with $p$ elements.\\
$\bbF_q$ will be the finite field with $q = p^n$ elements for some $n \geq 1$.\\
For any finite field $\bbF_q$, $\bbF_q^\times$ will be the multiplicative unit group of the field.\\
$\varepsilon$ will be a primitive $p^\text{th}$ root of unity. For $\varepsilon \in \bbC$, we use $\varepsilon = e^{2 \pi i /p}$.\\
$\mu_N$ will be the group of $N^\text{th}$ roots of unity.\\
$\tr$ will be the trace of $\bbF_q/\bbF_p$.\\
$\xi$ and $\lambda$ will be additive characters of $\bbF_q$, typically $\xi = \varepsilon^{\tr}$, and $\widehat{\bbF_q}$ will be the group of additive characters of $\bbF_q$. \\
$\chi$ will be a multiplicative character of $\bbF_q$ and $\widehat{\bbF^\times_q}$ will be the group of multiplicative character of $\bbF_q^\times$.\\
$\omega$ will be the Teichm\"uller character, a generator of $\widehat{\bbF^\times_q}$.\\
$S(\chi, \xi)$ will be the Gauss sum of $\chi$ with respect to $\xi$ with $S(\chi)$ used when $\xi$ is understood.\\
$\fp$ will be a prime ideal of the ring of integers of $\bbQ(\mu_{q-1})$ lying over $\langle p \rangle$.\\
$\fP$ will be a prime ideal of the ring of integers of $\bbQ(\mu_{q-1}, \mu_p)$ lying over $\fp$.\\
\section{Gauss Sums for Finite Fields}
\label{sec:finite-fields-intro}

We will be dealing only with complex representations of finite fields.
Since $\bbF_q$ is a field, all representations are $1$ dimensional characters.
An additive character of $\bbF_q$ is a function $\xi : \bbF_q \to \bbC^\times$ with $\xi(a + b) = \xi(a)\xi(b)$.
A multiplicative character of $\bbF$ is a function $\chi : \bbF_q^\times \to \bbC^\times$ with $\chi(ab) = \chi(a)\chi(b)$.
If we ever need to evaluate a multiplicative character $\chi$ at $0 \not \in \bbF_q^\times$ then we use $\chi(0) = 0$. \\

The two most important characters in this setting are the additive character defined by the trace and the multiplicative character called the Teichm\"uller character. 
The primary trace we are interested in is the trace for the extension $\bbF_q / \bbF_p$ which is defined in the following way.
%rephrase this to remove defn environment; only want defn env when will refer to it later
\begin{defn}
The trace from $\bbF_q / \bbF_p$ for $q = p^n$ is defined by $\tr : \bbF_q \to \bbF_p$
 \[ \tr : x \mapsto \sum_{i=0}^{n-1} x^{p^i} = x + x^p + x^{p^2} + \cdots + x^{p^{n-1}}.\]
\end{defn}
We can also define a trace for any extension; specifically, for the extension $\bbF_{q^n}/\bbF_q$ we have a trace defined by \[\tr_{\bbF_{q^n}/\bbF_q} : x \mapsto \sum_{i=0}^{n-1} x^{q^i}.\] 
We can unify these definitions of trace in the following way.
\begin{defn}
Let $E/F$ be a Galois field extension and let $G = \gal(E/F)$ be the Galois group of automorphisms of $E$ fixing $F$. 
Then the trace $\tr : E \to F$ is defined by \[\tr : x \mapsto \sum_{\sigma \in G} \sigma x.\]
\end{defn}

\noindent Then we can define an additive character $\lambda : \bbF_q \to \mu_p$ by $\lambda(x) = \varepsilon^{\tr(x)}$.
It takes a bit more to define the Teichm\"uller character.\\

Consider the field $\bbQ(\mu_{q-1})$ and let $\fp$ be the prime ideal lying over $p$.
Then the residue field of $\bbQ(\mu_{q-1})$ mod $\fp$ is isomorphic to $\mu_{q-1}$ which in turn is isomorphic to $\bbF_q^\times$.
\begin{defn}\label{def:Teichmuller-char}
We define the Teichm\"uller character $\omega : \bbF_q^\times \to \mu_{q-1}$ by \[\omega (u) \equiv  u \mod \fp.\]
\end{defn}
\noindent This character generates the character group of $\bbF_q^\times$; so for all multiplicative characters $\chi$ of $\bbF_q^\times$ there is some integer $k$ such that $\chi = \omega^k$.\\
When we have two multiplicative character $\chi_1$ and $\chi_2$, we say that the twist of $\chi_1$ by $\chi_2$ is $\chi_1 \otimes \chi_2$.
When written in terms of the Techm\"uller character, we have $\omega^{k_1} \otimes \omega^{k_2} = \omega^{k_1+k_2}$.

Now we can define Gauss sums for finite fields, which depend upon a choice of an additive character and a multiplicative one. 
For finite fields, we will always use the additive character $\lambda$ defined above.
\begin{defn}\label{def:Gsum-FF}
The Gauss sum for a multiplicative character $\chi$ is denoted $S(\chi)$ or $S(\chi, \lambda)$ and is defined by \[S(\chi, \lambda) = \sum_{u \in \bbF_q^\times} \chi(u) \lambda(u).\]
\end{defn}
\noindent There are a few useful properties of Gauss sums that can be easily proven.
\begin{prop}
For a nontrivial multiplicative character $\chi$ on a finite field $\bbF_q$, we have that $|S(\chi)| = q^{1/2}$.
\end{prop}
\begin{prop}
For a multiplicative character $\chi$ on a finite field $\bbF_q$ with $q = p^n$, we have that $S(\chi^p) = S(\chi)$.
\end{prop}
This second proposition is because raising to the $p^\text{th}$ power only permutes the elements of the sum. 
For this reason we collect together the characters $\{\chi, \chi^{p}, \ldots, \chi^{p^{n-1}}\}$ together into a set we call the Frobenius orbit.
The converse theorem for Gauss sums concerns separating the multiplicative characters of a finite field $\bbF_q$ into their Frobenius orbits.\\

However, first we separate out the characters that live in degenerate Frobenius orbits. 
These are the non-regular characters of $\bbF_q$ and are characterized by having $\chi = \chi^{p^k}$ for some $k \mid n-1$, or equivalently, factoring through the norm of a subextension. 
If we write $\chi = \omega^k$, then $\chi$ is non-regular when there is some $k' \mid \frac{q-1}{p-1}$ with $k' \neq 1$ such that $k' \mid k$.
It suffices to check $k' = \frac{p^m - 1}{p-1}$ for $m \mid n$ and $m \neq 1$.
If a character is not non-regular, then it is regular. 
The regular characters are those with Frobenius orbits of size $n$ when $q = p^n$.\\

We can now state the conjectured converse theorem for Gauss sums of finite fields.
\begin{conj}[Nien]\label{conj:local-converse-FF}
Let $\chi_1$ and $\chi_2$ be two regular multiplicative characters of $\bbF_q$ with $q = p^n$ and $n$ prime. If \[S(\chi_1 \otimes \sigma) = S(\chi_2 \otimes \sigma)\text{, for all } \sigma \in \hat{\bbF_p^\times}\] then $\chi_1 = \chi_2^{p^i}$ for some integer $i$.
\end{conj}

For $n=2$; this becomes our theorem 
\begin{theorem}\label{thm:local-converse-FF}
Let $\chi_1$ and $\chi_2$ be two regular multiplicative characters of $\bbF_{p^2}$. If \[S(\chi_1 \otimes \sigma) = S(\chi_2 \otimes \sigma)\text{, for all } \sigma \in \widehat{\bbF_p^\times}\] then $\chi_1 = \chi_2^{p}$ or $\chi_1 = \chi_2$.
\end{theorem}


\section{Stickelberger's Theorem}
\label{sec:stickelberger}
Before we set out to prove our converse theorem for finite fields; it is simplest to reframe the problem as a question about the $p$-adic expansions of integers.
The tool that allows us to do this is Stickelberger's theorem which we shall introduce and prove in this section.
Working in the field $\bbQ(\mu_{q-1}, \mu_p)$, Stickelberger's theorem gives us a factorization of the ideal generated by $S(\omega^{-k})$ in terms of the the prime ideals over $p$ and the sum of the $p$-adic digits of $k$.
\\

As above; we will consider the case when $\bbF_q$ is a field of size $q = p^n$. 
We will let $\fp$ be a prime ideal in $\bbQ(\mu_{q-1})$ lying above $p$. 
Then we shall consider another extension $\bbQ(\mu_{q-1}, \mu_p)$ with $\fP$ being a prime ideal lying above $\fp$. Additionally; when it is useful for emphasis, we will let $\pi = \varepsilon - 1$
\\

Recall that the Teichm\"uller character generates $\hat{\bbF_q}$, so for any $\chi \in \hat{\bbF_q}$ we have $\chi = \omega^k$ for some $0 \leq k \leq q-1$, or equivalently, $\chi = \omega^{-k}$ for some $0 \leq k \leq q-1$, which will be more convenient when phrasing Stickelberger's theorem.
For such a $k$, we can write the $p$-adic expansion of $k$ as
\[k = k_0 + k_1 p + \cdots + k_{n-1}p^{n-1}\]
with $0 \leq k_i \leq p-1$. Then we can define the functions $s, \gamma : \bbZ \to \bbZ^+$ by 
\begin{align*}
s(k) &= k_0 + k_1 + \cdots + k_{n-1} \\
\gamma(k) &= k_0! k_1!  \cdots  k_{n-1}!
\end{align*}
for $0 \leq k < q-1$ and requiring that $s$ and $\gamma$ are $q-1$ periodic for other $k$.
\\

Our first step towards Stickelberger's theorem will be the following theorem which tells how many times one prime appears in the factorization of a Gauss sum.
\begin{theorem}\label{thm:Stickelberger}
For any integer $k$, we have the congruence 
\[\frac{S(\omega^{-k}, \varepsilon^\tr)}{(\varepsilon - 1)^{s(k)}} \equiv \frac{-1}{\gamma(k)} \mod \fP.\]
In particular, $\ord_\fP S(\omega^{-k}) = s(k)$.
\end{theorem}
To get the full factorization of $S(\omega^{-k})$, we need a few more definitions.\\

For $t \in \bbR$, we will let $0 \leq \langle t \rangle < 1$ be the representative of $t$ in $ \bbR / \bbZ$. 
Then let $G = \gal(\bbQ(\mu_m)/\bbQ) \cong (\bbZ / m\bbZ)^\times$ and let $\sigma_c \in G$ be defined by $\sigma_c : \zeta \mapsto \zeta^c$ and $\sigma_c|_{\mu_p}  = \id$; where $\zeta \in \mu_{q-1}$.
Then we make the following definition: 
\begin{defn}
We define the Stickelberger element in the group ring $\bbQ[G]$ as 
\[\theta(k,\fp) = \sum_{c \in (\bbZ/m\bbZ)^\times} \langle \frac{kc}{q-1}\rangle \sigma_c^{-1}\]
\end{defn}
Then we can get a full factorization of the ideal generated by $S(\omega^{-k})$. Using $\fa \sim \fb$ to mean that $\fa / \fb$ is the unit ideal, we have the following theorem.
\begin{theorem}
The factorization of the ideal generated by $S(\omega^{-k}, \varepsilon^\tr)$ is \[S(\omega^{-k}) \sim \fP^{(p-1)\theta(k, \fp)} \sim \fp^{\theta(k,\fp)}.\]
\end{theorem}



\section{The $n=2$ Gauss Sum Local Converse Theorem}
\label{sec:n=2-LCT-FF}

Recall that we would like to prove Conjecture \ref{conj:local-converse-FF} for the case of $n=2$.
By using the fact that $\exists k$ such that $\chi = \omega^k$, we can use Stickelberger's theorem rewrite the conjecture in the following way.

\begin{theorem}\label{thm:local-converse-FF-rewrite}
Suppose that $\alpha, \beta \in \bbZ/(p^2 -1)\bbZ$ with $p+1 \nmid \alpha, \beta$ and \[s(\alpha + k(p+1)) = s(\beta + k(p+1))\] for all $0 \leq k < p-1$. Then we have that $\alpha \equiv \beta \mod p^2 - 1$ or $\alpha \equiv p \beta \mod p^2 -1$.
\end{theorem}

\begin{prop}
Theorem \ref{thm:local-converse-FF} and Theorem \ref{thm:local-converse-FF-rewrite} are equivalent.
\end{prop}

\begin{proof}
Suppose the conditions of Theorem \ref{thm:local-converse-FF} hold. 
If we write $\chi_1 = \omega^\alpha$ and $\chi_2 = \omega^\beta$ and use the fact that all the twists can be written as $\sigma = \omega^{k (p+1)}$ for $0 \leq k < p-1$; then we are claiming that $S(\omega^{\alpha + k(p+1)}) = S(\omega^{\beta+k(p+1)})$ for all $0 \leq k < p-1$. 
However, by Theorem \ref{thm:Stickelberger} if $S(\omega^{\alpha + k(p+1)}) = S(\omega^{\beta+k(p+1)})$ for all $0 \leq k < p-1$ then $s(-(\alpha + k(p+1))) = s(-(\beta+k(p+1)))$ for all $0 \leq k < p-1$. 
This implies the conditions of Theorem \ref{thm:local-converse-FF-rewrite}.
\\

In the other direction, suppose that the conditions of Theorem \ref{thm:local-converse-FF-rewrite} hold. 
Then $p+1 \nmid \alpha, \beta$ ensures that $\chi_1 = \omega^\alpha$ and $\chi_2 = \omega^\beta$ are regular characters of $\bbF_{p^2}$. Then $s(\alpha + k(p+1)) = s(\beta + k(p+1))$ for all $0 \leq k < p-1$ only provides that $\ord_{\fP} S(\chi_1 \otimes \sigma) = \ord_{\fP} S(\chi_2 \otimes \sigma)$ for all twists $\sigma$. \textcolor{red}{Rewrite this! Have actual proof on paper.}

\end{proof}

Now that we only need to prove Theorem \ref{thm:local-converse-FF-rewrite}, we shall prove the $n=2$ Gauss sum local converse theorem.
Our main tool for doing this will be a lemma describing how the digit sum changes with twists.

\begin{lemma}
  \label{lem:digit-sum-twist}
  Let $0 \leq i, t-i \leq p-1$ and $2 \leq \ell \leq p$, then 
  \[ s((t-i)+ip+(p-\ell)(p+1)) = \begin{cases} p + t-2\ell+1 & i \leq \ell - 2 \\ t - 2 \ell + 2 & i > \ell -2\end{cases}.\]
\end{lemma}

\begin{proof}
  This proof is mainly a simple computation in which we have to keep track of the possible for cases when we have carry in the $1$'s place or in the $p$'s place.
  Specifically, we will have a carry from the $1$'s into the $p$'s place when $t - i \geq \ell$ which causes $p + t - i - \ell \geq p$.
  Similarly, we get a carry from the $p$'s place in to the $1$'s place when either $i \geq \ell$ or $1+i \geq \ell$, depending on if the previous carry happens.
  Since $0 \leq p - \ell \leq p-2$ and $0 \leq i,t-i \leq p-1$, these are the only carry's that can happen because the max value for each digit after summing before carrying is $2p-3$.
  This gives us the following calculation that proves the lemma.
  \begin{align*}
s((t-i) + (i)p + (p - \ell)(p+1)) &= s((p + t - i - \ell) + (p + i -\ell)p) \\ 
&=\begin{cases}
  s((t - i - \ell) + (p + 1 + i -\ell)p) & t -i  \geq \ell \\
  s((p + t - i - \ell) + (p + i -\ell)p) & t - i <  \ell 
\end{cases}\\
&=\begin{cases}
  s((t + 1 - i - \ell) + ( 1 + i -\ell)p) & t -i  \geq \ell \text{ and } 1+i \geq \ell \\
  s((t - i - \ell) + (p + 1 + i -\ell)p) & t -i  \geq \ell  \text{ and } 1 + i < \ell \\
  s((p + t - i - \ell) + (p + i -\ell)p) & t - i <  \ell \text{ and } i < \ell \\
  s((p + t +1 - i - \ell) + (1 + i -\ell)p) & t - i <  \ell \text{ and } i \geq \ell
\end{cases} \\
s((t-i)+(i)p + (p-\ell)(p+1))
&= \begin{cases}
  p+t-2\ell + 1 & i \leq \ell - 2 \\
  t-2\ell + 2 & i > \ell -2
\end{cases}
\end{align*}
  \\

  Note that the only way to have $p + t - 2 \ell + 1 = t - 2 \ell + 2$ is to have $p = 1$, which is not a prime, so we will always have that $s((t-i)+ip + (p - \ell)(p+1))$ takes on different values for $i \leq  \ell - 2$ and $i > \ell - 2$.
  
\end{proof}

With Lemma \ref{lem:digit-sum-twist} in hand, we can now prove Theorem \ref{thm:local-converse-FF-rewrite}.
\begin{proof}
Note that we only need to consider the case of fixed $\alpha$ and can vary $\beta$ to find those that satisfy the equality of Gauss sums. 

We would like to show that the condition $s(\alpha + k(p+1)) = s(\beta + k(p+1))$ for all $0 \leq k < p-1$ implies that $\alpha \equiv p \beta \mod p^2 -1$ or $\alpha \equiv \beta \mod p^2 - 1$. 
Another way of stating this is that if $s(\alpha + k(p+1)) = s(\beta+k(p+1))$ for all $0 \leq k < p-1$ then $\omega^{\-\alpha}$ and $\omega^{-\beta}$ are in the same Frobenius orbit.
Let $s(\alpha) = t = s(\beta)$ be our fixed digit sum before twists, and let $r = \left \lceil \frac{t}{2} \right \rceil - 1$.
Then the set of possible Frobenius orbits with a fixed digit sum $t$ is 
\[\{\{t,tp\}, \{(t-1)+p, 1 + (t-1)p\},\{t-2)+2p, 2+(t-2)p\}, \ldots, \{(t-r)+rp, r + (t-r)p\}\}.\]
This takes the $t+1$ integers with digit sum $t$ and splits them into orbits of size $2$ in a way that corresponds to (cyclically) permuting the digits.
When $t$ is even, there is a degenerate orbit $\{(r+1)+(r+1)p\}$ where permuting the digits doesn't change the number or the underlying character; these correspond to non-regular characters, or characters of $\bbF_p$ lifted to $\bbF_{p^2}$.
We write a generic element of an orbit as $(t - i) +ip$ since it doesn't matter which element of the orbit we pick.

Our goal is then to show that with an appropriate set of twists, we can distinguish between these orbits.
I claim that it is sufficient to consider the twists by $k = p - \ell$ for $2 \leq \ell \leq r +1 < t$; note that there are only $\ell$ satisfying these inequalities for $t \geq 4$, so we will deal with the $t = 1,2,3$ cases by hand.

First, the $t = 1$ case is trivial because there is only one orbit, $\{1,p\}$.
Similarly, the $t = 2$ case is trivial because there is only one non-degenerate orbit $\{2,2p\}$ and the orbit $\{1+p\}$ is degenerate.
Finally, we have that $t = 3$ case.
Then there are two orbits $\{3,3p\}$ and $\{2+p,1+2p\}$.
For $p \leq 3$, the case of $t = 3$ is impossible, and for $p > 3$, consider twisting by $k = p-3$, from the lemma we find that $s(3 + (p-3)(p+1)) = p-2$ and $s(2 + p + (p-3)(p+1)) = 2p-3$ which are different for all primes, so the single twist by $p-3$ serves to distinguish between the orbits.

Now, let us first consider what happens for general $t$ when we twist by $k = p-2$.
Lemma \ref{lem:digit-sum-twist} tells us that $s((t-i)+ip)$ is either $p+t-3$ for $i \leq 0$ or $t - 2$ for $i > 0$.
These are different values and so twisting by $k = p-2$ allows us to distinguish $\{t,tp\}$ from $\{(t-i)+ip,i+(t-i)p\}$ for all $i > 0$.

Similarly, twisiting by $p - \ell$ allows us to distinguish between $\{(t-\ell+2)+(\ell-2)p,(\ell-2) + (t-\ell+2)p\}$ and $\{(t-\ell+1)+(\ell-1)p,(\ell-1)+(t-\ell+1)p\}$.
By letting $\ell$ vary from $2$ up to $r+1$, we are thus able to distinguish between all the non-degenerate Frobenius orbits.
\end{proof}

As a simple corollary of Theorem \ref{thm:local-converse-FF-rewrite}, we have a proof of Theorem \ref{thm:local-converse-FF}, the Gauss sum converse theorem that we were hoping to prove.


\endinput
